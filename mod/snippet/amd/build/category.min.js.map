{"version":3,"file":"category.min.js","sources":["../src/category.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Snipet category manager.\n *\n * @module     mod_snippet/category\n * @class      Category\n * @copyright 2023 Nicolas Dalpe <ndalpe@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport ModalForm from 'core_form/modalform';\nimport Notification from 'core/notification';\nimport { get_string as getString } from 'core/str';\n\nconst selectors = {\n    showNewCategoryButton: '[data-action=\"createcategorymodal\"]',\n};\n\n/**\n * Initialise and highlight.js and load the language syntax module.\n *\n * @param {string} language The language used in the snippet.\n */\nexport const init = () => {\n\n    const saveAsPresetButton = document.querySelector(selectors.showNewCategoryButton);\n    const modalForm = new ModalForm({\n        modalConfig: {\n            title: getString('newcategory_modal_title', 'mod_snippet'),\n            large: true,\n        },\n        args: { name: saveAsPresetButton.dataset.dataid },\n        saveButtonText: getString('ok', 'core_moodle'),\n        formClass: 'mod_snippet\\\\form\\\\category_add',\n    });\n\n    modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, event => {\n        if (event.detail.result) {\n            console.log('form sent');\n        } else {\n            Notification.addNotification({\n                type: 'error',\n                message: event.detail.errors.join('<br>')\n            });\n        }\n    });\n\n    modalForm.show();\n\n};"],"names":["selectors","saveAsPresetButton","document","querySelector","modalForm","ModalForm","modalConfig","title","large","args","name","dataset","dataid","saveButtonText","formClass","addEventListener","events","FORM_SUBMITTED","event","detail","result","console","log","addNotification","type","message","errors","join","show"],"mappings":";;;;;;;;0LA4BMA,gCACqB,oDAQP,WAEVC,mBAAqBC,SAASC,cAAcH,iCAC5CI,UAAY,IAAIC,mBAAU,CAC5BC,YAAa,CACTC,OAAO,mBAAU,0BAA2B,eAC5CC,OAAO,GAEXC,KAAM,CAAEC,KAAMT,mBAAmBU,QAAQC,QACzCC,gBAAgB,mBAAU,KAAM,eAChCC,UAAW,oCAGfV,UAAUW,iBAAiBX,UAAUY,OAAOC,gBAAgBC,QACpDA,MAAMC,OAAOC,OACbC,QAAQC,IAAI,mCAECC,gBAAgB,CACzBC,KAAM,QACNC,QAASP,MAAMC,OAAOO,OAAOC,KAAK,aAK9CvB,UAAUwB"}